
# Домашнее задание к занятию 1.  «Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения»


## Задача 1

Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

##### Ответ:

Основное отличие в способе организации доступа гостевых операционных систем к ресурсам хост-системы:
- полная (аппаратная) виртуализация - виртуальные машины работают в изолированном окружении, происходит эмуляция собственного аппаратного обеспечения, могут работать с различными собственными операционными системами, ядром и драйверами. Гостевые ОС не нуждаются в модификации. Присутствует жёсткое распределение ресурсов между виртуальными машинами на уровне гипервизора;
- паравиртуализация (программная виртуализация) - виртуальные машины работают через программное обеспечение - гипервизор, устанавливаемый на хостовую операционную систему. Гипервизор модифицирует ядро гостевой операционной системы для разделения доступа к аппаратным средствам физического сервера;
- виртуализация на основе ОС (другими словами, контейнеризация) - гипервизором выступает ядро хостовой операционной системы. Позволяет запускать несколько гостевых ОС на одном хосте. Не позволяет запускать операционные системы с ядрами, отличными от типа хостовой операционной системы. Гостевые операционные системы (контейнеры) работают в изолированном окружении с  использованием ресурсов хост-системы. При таком типе виртуализации виртуальные машины получаются очень легковесными и экономят ресурсы хост-системы.
---

## Задача 2

Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.

Организация серверов:

- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:

- высоконагруженная база данных, чувствительная к отказу;
- различные web-приложения;
- Windows-системы для использования бухгалтерским отделом;
- системы, выполняющие высокопроизводительные расчёты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

##### Ответ:

- Высоконагруженная база данных, чувствительная к отказу - физические сервера для обеспечения максимального уровня производительности, в первую очередь дисковой системы и надежности, минимизации риска отказов.
- Различные web-приложения - зависит от потребностей приложения. Можно использовать любой из трёх вариантов организации серверов. Для простых приложений подойдёт виртуализация уровня ОС, для более крупных проектов есть смысл рассматривать остальные типы виртуализации.
- Windows-системы для использования бухгалтерским отделом - как правило, рекомендуется использование физических серверов, так как запросы к бухгалтерским базам данных могут быть достаточно сложными. В таких случаях скорость обработки данных, хранящихся на дисках, критична. Конечно, с точки зрения оптимизации места в серверной и расхода электроэнергии на отдельный сервер, возникают и реализуются идеи поднятия различных виртуальных машин для бухгалтерии в гипервизорах. В этом случае нужно постараться рассчитать предполагаемую нагрузку виртуальных машин на ресурсы сервера с учётом роста потребностей виртуальных машин и не забивать подобные гипервизоры другими ресурсоёмкими виртуальными машинами.
- Системы, выполняющие высокопроизводительные расчёты на GPU - физические сервера для обеспечения оптимальной производительности и эффективности вычислений. Такой способ организации позволит снизить накладные расходы на систему

---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

##### Ответ:

1. VMware vSphere. Поддерживает машины Windows и Linux. Предлагает программные балансировщики нагрузки, репликацию данных и механизм резервного копирования. Система обладает высокой производительностью и масштабируемостью. Решение платное, оплата за лицензию (одна лицензия на один физический процессор) и за сервисную поддержку в течение года
2. Гипервизор KVM. Это решение с открытым исходным кодом, обеспечивающее высокую производительность, поддерживающее как Linux, так и Windows. KVM - нативная система виртуализации для большинства современных ядер Linux, находящаяся в активном развитии.
3. Microsoft Hyper-V. Данное решение полностью совместимо с Windows-серверами и обеспечивает высокую производительность виртуальных машин. Hyper-V поддерживает широкий набор инструментов управления виртуальными машинами, включая системы мониторинга и управления ресурсами.
4. Docker либо LXC. Легковесные контейнеры для тестирования функционала программного обеспечения будут быстро создаваться и выполнять свой функционал.

---

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

##### Ответ:

Проблемы и недостатки:
- Увеличение требуемых усилий и ресурсов (материальных, временных) для администрирования и мониторинга одновременно нескольких типов виртуализации;
- Увеличение количества потенциальных программных и аппаратных несовместимостей;
- Увеличение затрат на обучение персонала.

Для минимизации рисков:
- Не плодить сущности - использовать только продуманные решения, нужные для выполнения конкретных задач;
- Проработать вопрос совместимости планируемых систем;
- Организовать мониторинг и резервное копирование;
- Аккуратно и содержательно вести документацию;
- Произвести обучение персонала.

В идеальном мире я бы не стал использовать гетерогенную среду виртуализации, чтобы облегчить работу всем, кто должен участвовать в создании и поддержке систем виртуальных машин. Реальность заставляет нас применять различные решения для различных приложений вне зависимости от наших желаний, так как для решения различных задач нужно применять различные инструменты, наиболее подходящие для этого.
---

## Дополнительные вопросы от преподавателя (UPD 11.05.2023 ~2300)

Вам точно известна технология контейнеризации - Docker, K8S, OpenShift. К какому типу из первого номера относится эта технология. Где данную технологию уместно использовать во втором номере?

##### Ответ:

Технология контейнеризации относится к виртуализации на основе ОС. Думаю, что данную технологию уместно использовать при развёртывании различных web-приложений.

Во втором задании для Windows-системы для использования бухгалтерским отделом можно ли использовать паравиртуализацию?

##### Ответ:

Да, паравиртуализацию можно использовать без каких-либо проблем, ведь это всего лишь инструмент для реализации нескольких виртуальных машин на одном физическом сервере. А если следовать best practice guidelines при настройке, то практически всё можно сконфигурировать под свои задачи.

---
